# Automation for hw1

This script is intended to give you an automation for running the program under 4 typical alignment tools (bowtie bowtie2 bwa subread).  The file generated are named in an ordered structure so that you can fetch the data without mixing them. It also gives you a final report of precision, recall, time consumption. 



## Getting Started

Add the script to executables.

```
>>> chmod +x auto.sh
```

Dependencies: bwa bowtie2 bowtie subread file_handler.py (**Be sure that you have build the index of them previously)**    *file_handler.py*

**Make sure auto.sh and file_handler.py are in the same directory**



## Output

A directory called results_{the read length you wanted}. (Eg: results_100)

Inside this directory:

There is a time.log to record the time information during the process.

There is an output.log to record the flagstats information generated by the three tools.

And there are also sam files which names are specified explicitly for you to play around.

Finally, the script will integrate the information from time.log and output.log to give you a report file in the outer directory.

```bash
>>> cat report
Report
Read length 50
Bwa precision 0.9807779826062196, recall 0.9988905
Time: Good data 0m7.868s bad data 0m5.483s
Bowtie2 precision 0.9835806475937531, recall 0.9717585
Time: Good data 0m3.656s bad data 0m2.685s
Bowtie precision 1.0, recall 0.918166
Time: Good data 0m2.536s bad data 0m2.452s
Subread precision 0.9609750401035995, recall 0.9216505
Time: Good data 0m12.769s bad data 0m10.312s
```



## Parameters

* You should add parameters sequentially. (All parameters are **required**)

* The first parameter specify the read length you want to simulate

* The second parameter specify the number of threads you want to use 

* The third parameter specify the location of bwa index

* The fourth parameter specify the location of bowtie2 index(because bowtie and bowtie2 index could be used interchangeably, so we omit you to input another bowtie index)

* The fifth parameter specify the location of subread index

* The last parameter specifies the location of a fasta file for you to simulate reads.

  ```
  >>> ./auto.sh 100 8 /Users/clintli/Downloads/BIOINFOMATICS/hg38.fa /Users/clintli/Downloads/bowtie2/GCA_000001405.15_GRCh38_no_alt_analysis_set.fna.bowtie_index /Users/clintli/Downloads/BIOINFOMATICS/my_index /Users/clintli/Downloads/BIOINFOMATICS/my_seq.fa
  ```




## Notice

**If you rerun the script for more than one time, every time it will generate a file named report. So you should change the name, or collect the data before you run it another time.**

